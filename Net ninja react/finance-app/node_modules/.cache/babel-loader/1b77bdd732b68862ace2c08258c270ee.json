{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useReducer, useEffect, useState } from 'react';\nimport { projectFirestore, timestamp } from '../firebase/config';\nlet initialState = {\n  document: null,\n  isPending: false,\n  error: null,\n  success: null\n};\nconst firestoreReducer = (state, action) => {\n  switch (action.type) {\n    case 'IS_PENDING':\n      return {\n        isPending: true,\n        document: null,\n        success: false,\n        error: null\n      };\n    case 'ADDD_DOCUMENT':\n      return {\n        isPending: false,\n        success: true,\n        error: null,\n        document: action.payload\n      };\n    case 'ERROR':\n      return {\n        isPending: false,\n        document: null,\n        success: false,\n        error: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport const useFireStore = collection => {\n  _s();\n  const [response, dispatch] = useReducer(firestoreReducer, {\n    initialState\n  });\n  const [isCancelled, setIsCancelled] = useState(false);\n\n  // collection ref, passing the collection which we want to\n  // connect to\n  const ref = projectFirestore.collection(collection);\n\n  // only dispatch is not cancelled\n  const dispatchIfNotCancelled = action => {\n    if (!isCancelled) dispatch(action);\n  };\n\n  // add a document\n  const addDocument = async doc => {\n    dispatch({\n      type: 'IS_PENDING'\n    });\n    try {\n      const createdAt = timestamp.fromDate(new Date());\n      const addedDocument = await ref.add({\n        ...doc,\n        createdAt\n      });\n      dispatchIfNotCancelled({\n        type: 'ADDED_DOCUMENT',\n        payload: addedDocument\n      });\n    } catch (error) {\n      dispatchIfNotCancelled({\n        type: 'ERROR',\n        payload: error\n      });\n    }\n  };\n\n  // delete a document\n\n  const deleteDocument = async id => {};\n\n  // cleanup function\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n  return {\n    addDocument,\n    deleteDocument,\n    response\n  };\n};\n_s(useFireStore, \"/HNrTJP+f/hS3kXzTFJQmF7gmj0=\");","map":{"version":3,"names":["useReducer","useEffect","useState","projectFirestore","timestamp","initialState","document","isPending","error","success","firestoreReducer","state","action","type","payload","useFireStore","collection","response","dispatch","isCancelled","setIsCancelled","ref","dispatchIfNotCancelled","addDocument","doc","createdAt","fromDate","Date","addedDocument","add","deleteDocument","id"],"sources":["/home/bahubali/Code/Projects/Net ninja react/finance-app/src/hooks/useFireStore.js"],"sourcesContent":["import {useReducer, useEffect, useState}  from 'react';\nimport {projectFirestore,timestamp} from '../firebase/config';\n\nlet initialState = {\n    document:null,\n    isPending:false,\n    error:null,\n    success:null\n}\n\nconst firestoreReducer=(state,action)=>{\n\n    switch(action.type)\n    {\n        case 'IS_PENDING':\n            return {isPending:true,document:null, success:false,error:null}\n        case 'ADDD_DOCUMENT':\n            return {isPending:false,success:true,error:null,document:action.payload}\n        case 'ERROR':\n            return {isPending:false, document:null,success:false,error:action.payload}\n        default:\n            return state;\n    }\n\n}\n\nexport const useFireStore = (collection)=>{\n\n    const [response,dispatch] = useReducer(firestoreReducer,{initialState})\n    const [isCancelled, setIsCancelled] = useState(false);\n\n    // collection ref, passing the collection which we want to\n    // connect to\n    const ref = projectFirestore.collection(collection);\n\n    // only dispatch is not cancelled\n    const dispatchIfNotCancelled = (action)=>{\n        if(!isCancelled)    dispatch(action);\n    }\n\n\n    // add a document\n    const addDocument = async (doc)=>{\n        dispatch({type:'IS_PENDING'})\n\n        try {\n            const createdAt = timestamp.fromDate(new Date())\n            const addedDocument = await ref.add({...doc,createdAt});\n            dispatchIfNotCancelled({type:'ADDED_DOCUMENT',payload:addedDocument})\n        } catch (error) {\n            dispatchIfNotCancelled({type:'ERROR', payload:error})\n        }\n\n    }\n\n    // delete a document\n\n    const deleteDocument =async  (id)=>{\n\n    }\n\n    // cleanup function\n\n    useEffect(()=>{\n        return ()=>setIsCancelled(true);\n    },[])\n\n    return {addDocument, deleteDocument,response}\n}\n"],"mappings":";AAAA,SAAQA,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtD,SAAQC,gBAAgB,EAACC,SAAS,QAAO,oBAAoB;AAE7D,IAAIC,YAAY,GAAG;EACfC,QAAQ,EAAC,IAAI;EACbC,SAAS,EAAC,KAAK;EACfC,KAAK,EAAC,IAAI;EACVC,OAAO,EAAC;AACZ,CAAC;AAED,MAAMC,gBAAgB,GAAC,CAACC,KAAK,EAACC,MAAM,KAAG;EAEnC,QAAOA,MAAM,CAACC,IAAI;IAEd,KAAK,YAAY;MACb,OAAO;QAACN,SAAS,EAAC,IAAI;QAACD,QAAQ,EAAC,IAAI;QAAEG,OAAO,EAAC,KAAK;QAACD,KAAK,EAAC;MAAI,CAAC;IACnE,KAAK,eAAe;MAChB,OAAO;QAACD,SAAS,EAAC,KAAK;QAACE,OAAO,EAAC,IAAI;QAACD,KAAK,EAAC,IAAI;QAACF,QAAQ,EAACM,MAAM,CAACE;MAAO,CAAC;IAC5E,KAAK,OAAO;MACR,OAAO;QAACP,SAAS,EAAC,KAAK;QAAED,QAAQ,EAAC,IAAI;QAACG,OAAO,EAAC,KAAK;QAACD,KAAK,EAACI,MAAM,CAACE;MAAO,CAAC;IAC9E;MACI,OAAOH,KAAK;EAAC;AAGzB,CAAC;AAED,OAAO,MAAMI,YAAY,GAAIC,UAAU,IAAG;EAAA;EAEtC,MAAM,CAACC,QAAQ,EAACC,QAAQ,CAAC,GAAGlB,UAAU,CAACU,gBAAgB,EAAC;IAACL;EAAY,CAAC,CAAC;EACvE,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACA;EACA,MAAMmB,GAAG,GAAGlB,gBAAgB,CAACa,UAAU,CAACA,UAAU,CAAC;;EAEnD;EACA,MAAMM,sBAAsB,GAAIV,MAAM,IAAG;IACrC,IAAG,CAACO,WAAW,EAAKD,QAAQ,CAACN,MAAM,CAAC;EACxC,CAAC;;EAGD;EACA,MAAMW,WAAW,GAAG,MAAOC,GAAG,IAAG;IAC7BN,QAAQ,CAAC;MAACL,IAAI,EAAC;IAAY,CAAC,CAAC;IAE7B,IAAI;MACA,MAAMY,SAAS,GAAGrB,SAAS,CAACsB,QAAQ,CAAC,IAAIC,IAAI,EAAE,CAAC;MAChD,MAAMC,aAAa,GAAG,MAAMP,GAAG,CAACQ,GAAG,CAAC;QAAC,GAAGL,GAAG;QAACC;MAAS,CAAC,CAAC;MACvDH,sBAAsB,CAAC;QAACT,IAAI,EAAC,gBAAgB;QAACC,OAAO,EAACc;MAAa,CAAC,CAAC;IACzE,CAAC,CAAC,OAAOpB,KAAK,EAAE;MACZc,sBAAsB,CAAC;QAACT,IAAI,EAAC,OAAO;QAAEC,OAAO,EAACN;MAAK,CAAC,CAAC;IACzD;EAEJ,CAAC;;EAED;;EAEA,MAAMsB,cAAc,GAAE,MAAQC,EAAE,IAAG,CAEnC,CAAC;;EAED;;EAEA9B,SAAS,CAAC,MAAI;IACV,OAAO,MAAImB,cAAc,CAAC,IAAI,CAAC;EACnC,CAAC,EAAC,EAAE,CAAC;EAEL,OAAO;IAACG,WAAW;IAAEO,cAAc;IAACb;EAAQ,CAAC;AACjD,CAAC;AAAA,GA1CYF,YAAY"},"metadata":{},"sourceType":"module"}
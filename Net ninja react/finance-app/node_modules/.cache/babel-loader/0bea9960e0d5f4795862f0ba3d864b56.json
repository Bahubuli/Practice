{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useReducer, useEffect, useState } from 'react';\nimport { projectFirestore } from '../firebase/config';\nlet initialState = {\n  document: null,\n  isPending: false,\n  error: null,\n  success: null\n};\nconst firestoreReducer = (state, action) => {\n  switch (action.type) {\n    case 'IS_PENDING':\n      return {\n        ...state,\n        isPending: true\n      };\n    case 'ADDD_DOCUMENT':\n      return {\n        isPending: false,\n        success: true,\n        error: null,\n        document: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport const useFireStore = collection => {\n  _s();\n  const [response, dispatch] = useReducer(firestoreReducer, {\n    initialState\n  });\n  const [isCancelled, setIsCancelled] = useState(false);\n\n  // collection ref, passing the collection which we want to\n  // connect to\n  const ref = projectFirestore.collection(collection);\n\n  // only dispatch is not cancelled\n  const dispatchIfNotCancelled = action => {\n    if (!isCancelled) dispatch(action);\n  };\n\n  // add a document\n  const addDocument = async doc => {\n    dispatch({\n      type: 'IS_PENDING'\n    });\n    try {\n      const addedDocument = await ref.add(doc);\n      dispatchIfNotCancelled({\n        type: 'ADDED_DOCUMENT',\n        payload: addedDocument\n      });\n      console.log(response);\n    } catch (error) {}\n  };\n\n  // delete a document\n\n  const deleteDocument = async id => {};\n\n  // cleanup function\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n  return {\n    addDocument,\n    deleteDocument,\n    response\n  };\n};\n_s(useFireStore, \"/HNrTJP+f/hS3kXzTFJQmF7gmj0=\");","map":{"version":3,"names":["useReducer","useEffect","useState","projectFirestore","initialState","document","isPending","error","success","firestoreReducer","state","action","type","payload","useFireStore","collection","response","dispatch","isCancelled","setIsCancelled","ref","dispatchIfNotCancelled","addDocument","doc","addedDocument","add","console","log","deleteDocument","id"],"sources":["/home/bahubali/Code/Projects/Net ninja react/finance-app/src/hooks/useFireStore.js"],"sourcesContent":["import {useReducer, useEffect, useState}  from 'react';\nimport {projectFirestore} from '../firebase/config';\n\nlet initialState = {\n    document:null,\n    isPending:false,\n    error:null,\n    success:null\n}\n\nconst firestoreReducer=(state,action)=>{\n\n    switch(action.type)\n    {\n        case 'IS_PENDING':\n            return {...state,isPending:true}\n        case 'ADDD_DOCUMENT':\n            return {isPending:false,success:true,error:null,document:action.payload}\n        default:\n            return state;\n    }\n\n}\n\nexport const useFireStore = (collection)=>{\n\n    const [response,dispatch] = useReducer(firestoreReducer,{initialState})\n    const [isCancelled, setIsCancelled] = useState(false);\n\n    // collection ref, passing the collection which we want to\n    // connect to\n    const ref = projectFirestore.collection(collection);\n\n    // only dispatch is not cancelled\n    const dispatchIfNotCancelled = (action)=>{\n        if(!isCancelled)    dispatch(action);\n    }\n\n\n    // add a document\n    const addDocument = async (doc)=>{\n        dispatch({type:'IS_PENDING'})\n\n        try {\n            const addedDocument = await ref.add(doc);\n            dispatchIfNotCancelled({type:'ADDED_DOCUMENT',payload:addedDocument})\n            console.log(response);\n        } catch (error) {\n\n        }\n\n    }\n\n    // delete a document\n\n    const deleteDocument =async  (id)=>{\n\n    }\n\n    // cleanup function\n\n    useEffect(()=>{\n        return ()=>setIsCancelled(true);\n    },[])\n\n    return {addDocument, deleteDocument,response}\n}\n"],"mappings":";AAAA,SAAQA,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtD,SAAQC,gBAAgB,QAAO,oBAAoB;AAEnD,IAAIC,YAAY,GAAG;EACfC,QAAQ,EAAC,IAAI;EACbC,SAAS,EAAC,KAAK;EACfC,KAAK,EAAC,IAAI;EACVC,OAAO,EAAC;AACZ,CAAC;AAED,MAAMC,gBAAgB,GAAC,CAACC,KAAK,EAACC,MAAM,KAAG;EAEnC,QAAOA,MAAM,CAACC,IAAI;IAEd,KAAK,YAAY;MACb,OAAO;QAAC,GAAGF,KAAK;QAACJ,SAAS,EAAC;MAAI,CAAC;IACpC,KAAK,eAAe;MAChB,OAAO;QAACA,SAAS,EAAC,KAAK;QAACE,OAAO,EAAC,IAAI;QAACD,KAAK,EAAC,IAAI;QAACF,QAAQ,EAACM,MAAM,CAACE;MAAO,CAAC;IAC5E;MACI,OAAOH,KAAK;EAAC;AAGzB,CAAC;AAED,OAAO,MAAMI,YAAY,GAAIC,UAAU,IAAG;EAAA;EAEtC,MAAM,CAACC,QAAQ,EAACC,QAAQ,CAAC,GAAGjB,UAAU,CAACS,gBAAgB,EAAC;IAACL;EAAY,CAAC,CAAC;EACvE,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;;EAErD;EACA;EACA,MAAMkB,GAAG,GAAGjB,gBAAgB,CAACY,UAAU,CAACA,UAAU,CAAC;;EAEnD;EACA,MAAMM,sBAAsB,GAAIV,MAAM,IAAG;IACrC,IAAG,CAACO,WAAW,EAAKD,QAAQ,CAACN,MAAM,CAAC;EACxC,CAAC;;EAGD;EACA,MAAMW,WAAW,GAAG,MAAOC,GAAG,IAAG;IAC7BN,QAAQ,CAAC;MAACL,IAAI,EAAC;IAAY,CAAC,CAAC;IAE7B,IAAI;MACA,MAAMY,aAAa,GAAG,MAAMJ,GAAG,CAACK,GAAG,CAACF,GAAG,CAAC;MACxCF,sBAAsB,CAAC;QAACT,IAAI,EAAC,gBAAgB;QAACC,OAAO,EAACW;MAAa,CAAC,CAAC;MACrEE,OAAO,CAACC,GAAG,CAACX,QAAQ,CAAC;IACzB,CAAC,CAAC,OAAOT,KAAK,EAAE,CAEhB;EAEJ,CAAC;;EAED;;EAEA,MAAMqB,cAAc,GAAE,MAAQC,EAAE,IAAG,CAEnC,CAAC;;EAED;;EAEA5B,SAAS,CAAC,MAAI;IACV,OAAO,MAAIkB,cAAc,CAAC,IAAI,CAAC;EACnC,CAAC,EAAC,EAAE,CAAC;EAEL,OAAO;IAACG,WAAW;IAAEM,cAAc;IAACZ;EAAQ,CAAC;AACjD,CAAC;AAAA,GA1CYF,YAAY"},"metadata":{},"sourceType":"module"}
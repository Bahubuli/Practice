{"ast":null,"code":"var _s = $RefreshSig$();\n// import {useState, useEffect} from 'react';\n// import { projectAuth } from '../firebase/config';\n// import { useAuthContext } from './useAuthContext';\n\n// // in the component we are trying to do something\n// // that is trying to logout waiting for backend to\n// // actually logout and then do changes\n// // but if we unmount the component in between the process\n// // then our cleanup function fires\n// // where we set isCancelled as true and we put\n// // consition for changing the state this condition\n// //\n\n// export const useLogin = (email,password) =>{\n\n//     const [isCancelled, setIsCancelled] = useState(false);\n//     const [error,setError] = useState(null);\n//     const [IsPending,setIsPending] = useState(false);\n//     const {dispatch} = useAuthContext();\n\n//     const login = async ()=>{\n//         setError(null);\n//         setIsPending(true);\n\n//     try {\n//         const res =  await projectAuth.signInWithEmailAndPassword(email,password);\n//         // dispatch logout action\n//         dispatch({type:'LOGIN',payload:res.user})\n\n//         if(!isCancelled)\n//         {\n//             setIsPending(false);\n//             setError(null);\n//         }\n\n//     } catch (err) {\n//         if(!isCancelled)\n//         {\n//             console.log(err.message)\n//             setError(err.message);\n//             setIsPending(false);\n//         }\n//     }\n// }\n// useEffect(()=>{\n//     return ()=>{\n//         setIsCancelled(true);\n//     }\n// },[])\n\n//     return {login,error,IsPending}\n// }\n\nexport const useLogin = () => {\n  _s();\n  const [isCancelled, setIsCancelled] = useState(false);\n  const [error, setError] = useState(null);\n  const [isPending, setIsPending] = useState(false);\n  const {\n    dispatch\n  } = useAuthContext();\n  const login = async (email, password) => {\n    setError(null);\n    setIsPending(true);\n    try {\n      // login\n      const res = await projectAuth.signInWithEmailAndPassword(email, password);\n\n      // dispatch login action\n      dispatch({\n        type: 'LOGIN',\n        payload: res.user\n      });\n      if (!isCancelled) {\n        setIsPending(false);\n        setError(null);\n      }\n    } catch (err) {\n      if (!isCancelled) {\n        setError(err.message);\n        setIsPending(false);\n      }\n    }\n  };\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n  return {\n    login,\n    isPending,\n    error\n  };\n};\n_s(useLogin, \"cGSci79bHdsL+KPhvW2BaLT9Dxk=\", true);","map":{"version":3,"names":["useLogin","isCancelled","setIsCancelled","useState","error","setError","isPending","setIsPending","dispatch","useAuthContext","login","email","password","res","projectAuth","signInWithEmailAndPassword","type","payload","user","err","message","useEffect"],"sources":["/home/bahubali/Code/Projects/Net ninja react/finance-app/src/hooks/useLogin.js"],"sourcesContent":["// import {useState, useEffect} from 'react';\n// import { projectAuth } from '../firebase/config';\n// import { useAuthContext } from './useAuthContext';\n\n// // in the component we are trying to do something\n// // that is trying to logout waiting for backend to\n// // actually logout and then do changes\n// // but if we unmount the component in between the process\n// // then our cleanup function fires\n// // where we set isCancelled as true and we put\n// // consition for changing the state this condition\n// //\n\n\n// export const useLogin = (email,password) =>{\n\n//     const [isCancelled, setIsCancelled] = useState(false);\n//     const [error,setError] = useState(null);\n//     const [IsPending,setIsPending] = useState(false);\n//     const {dispatch} = useAuthContext();\n\n//     const login = async ()=>{\n//         setError(null);\n//         setIsPending(true);\n\n//     try {\n//         const res =  await projectAuth.signInWithEmailAndPassword(email,password);\n//         // dispatch logout action\n//         dispatch({type:'LOGIN',payload:res.user})\n\n//         if(!isCancelled)\n//         {\n//             setIsPending(false);\n//             setError(null);\n//         }\n\n//     } catch (err) {\n//         if(!isCancelled)\n//         {\n//             console.log(err.message)\n//             setError(err.message);\n//             setIsPending(false);\n//         }\n//     }\n// }\n// useEffect(()=>{\n//     return ()=>{\n//         setIsCancelled(true);\n//     }\n// },[])\n\n//     return {login,error,IsPending}\n// }\n\n\n\n\nexport const useLogin = () => {\n  const [isCancelled, setIsCancelled] = useState(false)\n  const [error, setError] = useState(null)\n  const [isPending, setIsPending] = useState(false)\n  const { dispatch } = useAuthContext()\n\n  const login = async (email,password) => {\n    setError(null)\n    setIsPending(true)\n\n    try {\n      // login\n      const res = await projectAuth.signInWithEmailAndPassword(email, password)\n\n      // dispatch login action\n      dispatch({ type: 'LOGIN', payload: res.user })\n\n      if (!isCancelled) {\n        setIsPending(false)\n        setError(null)\n      }\n    }\n    catch(err) {\n      if (!isCancelled) {\n        setError(err.message)\n        setIsPending(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => setIsCancelled(true)\n  }, [])\n\n  return { login, isPending, error }\n}\n"],"mappings":";AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAKA,OAAO,MAAMA,QAAQ,GAAG,MAAM;EAAA;EAC5B,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGF,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACG,SAAS,EAAEC,YAAY,CAAC,GAAGJ,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM;IAAEK;EAAS,CAAC,GAAGC,cAAc,EAAE;EAErC,MAAMC,KAAK,GAAG,OAAOC,KAAK,EAACC,QAAQ,KAAK;IACtCP,QAAQ,CAAC,IAAI,CAAC;IACdE,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF;MACA,MAAMM,GAAG,GAAG,MAAMC,WAAW,CAACC,0BAA0B,CAACJ,KAAK,EAAEC,QAAQ,CAAC;;MAEzE;MACAJ,QAAQ,CAAC;QAAEQ,IAAI,EAAE,OAAO;QAAEC,OAAO,EAAEJ,GAAG,CAACK;MAAK,CAAC,CAAC;MAE9C,IAAI,CAACjB,WAAW,EAAE;QAChBM,YAAY,CAAC,KAAK,CAAC;QACnBF,QAAQ,CAAC,IAAI,CAAC;MAChB;IACF,CAAC,CACD,OAAMc,GAAG,EAAE;MACT,IAAI,CAAClB,WAAW,EAAE;QAChBI,QAAQ,CAACc,GAAG,CAACC,OAAO,CAAC;QACrBb,YAAY,CAAC,KAAK,CAAC;MACrB;IACF;EACF,CAAC;EAEDc,SAAS,CAAC,MAAM;IACd,OAAO,MAAMnB,cAAc,CAAC,IAAI,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEQ,KAAK;IAAEJ,SAAS;IAAEF;EAAM,CAAC;AACpC,CAAC;AAAA,GAnCYJ,QAAQ"},"metadata":{},"sourceType":"module"}
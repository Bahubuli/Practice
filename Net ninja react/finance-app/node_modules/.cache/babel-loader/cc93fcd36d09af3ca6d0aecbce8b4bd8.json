{"ast":null,"code":"var _jsxFileName = \"/home/bahubali/Code/Projects/Net ninja react/finance-app/src/context/AuthContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer } from 'react';\nimport { projectAuth } from '../firebase/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return {\n        ...state,\n        user: action.payload\n      };\n    case 'LOGOUT':\n      return {\n        ...state,\n        user: null\n      };\n    case 'AUTH_IS_READY':\n      return {\n        ...state,\n        user: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport const AuthContextProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(authReducer, {\n    user: null,\n    authIsReady: false\n  });\n  // now this function will fire everytime there is some\n  // authentication state change\n  // but firebase does not have any removeEventListener\n  // like function but it returns a function that do the\n  // same work\n\n  useEffect(() => {\n    const unsub = projectAuth.onAuthStateChanged(user => {\n      dispatch({\n        type: 'AUTH_IS_READY',\n        payload: user\n      });\n    });\n    unsub();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      ...state,\n      dispatch\n    },\n    children: [children, \";\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n/*\nwhy we are calling function inside function discussion\n----------\nonAuthStateChanged takes a function as it's only argument. That function is the one that will be invoked whenever the auth state changes. So the code\n\nfunction printHelloWorld() {\n    console.log(\"Hello World\")\n}\n\nfirebase.auth().onAuthStateChanged(printHelloWorld)\nWill print \"Hello World\" to the console, any time the auth state changes. But, at some later time, we want to stop that function from executing anymore, because we've already done whatever we need to. If you're familiar with event listeners, they use a pattern where to remove one, you would call something like removeEventListener. But firebase does not have a offAuthStateChanged or some such. Instead the onAuthStateChanged function returns a function to you that unsubscribes the function you originally gave it. To be clear, it does not return your original function (the one you gave it, so printHelloWorld in this example), but returns you a new function that can be used to remove the original.\n\nSo going back to the example:\n\nfunction printHelloWorld() {\n    console.log(\"Hello World\")\n}\n\nvar unsubscribe = firebase.auth().onAuthStateChanged(printHelloWorld)\n\n// ... Sometime later when we are no longer interested in auth changes\nunsubscribe();\n// From this point forward, when the auth state changes, printHelloWorld will no longer be triggered.\nFinally, suppose that you only want to have a function run on auth changes, but only one time. The simplest way to do that would be to have it run once, then unsubscribe it. So the code:\n\nvar unsubscribe = firebase.auth().onAuthStateChanged(() => {\n    console.log(\"Hello World\")\n    unsubscribe()\n})\nmeans that the first time auth state changes, we will log the string, then immediately unsubscribe from further changes. So by calling the unsubscribe from within the function itself, we are just saying, run one time, then remove yourself.\n\nAlso, note that you can call unsubscribe at the beginning or end of the function, it doesn't matter. The entire function body will execute, just like any other. So calling unsubscribe won't halt the execution of the remainder of the function, or anything like that.\n\nThis is why things like\n\nvar unsubscribe = firebase.auth().onAuthStateChanged(() => {\n    unsubscribe()\n    // Lots of other code here...\n});\nis such a common pattern.\n*/\n_s(AuthContextProvider, \"/+zUbfjZmWuVXW0Fi5/LRDQ5Wno=\");\n_c = AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useReducer","projectAuth","AuthContext","authReducer","state","action","type","user","payload","AuthContextProvider","children","dispatch","authIsReady","useEffect","unsub","onAuthStateChanged"],"sources":["/home/bahubali/Code/Projects/Net ninja react/finance-app/src/context/AuthContext.js"],"sourcesContent":["import {createContext, useReducer} from 'react'\nimport { projectAuth } from '../firebase/config';\n\nexport const AuthContext = createContext();\n\nexport const authReducer = (state,action)=>{\n\n    switch(action.type)\n    {\n        case 'LOGIN':\n            return {...state, user:action.payload}\n        case 'LOGOUT':\n            return {...state,user:null};\n        case 'AUTH_IS_READY':\n            return {...state, user:action.payload}\n        default:\n            return state;\n    }\n}\n\nexport const AuthContextProvider = ({children})=>{\n\n    const [state,dispatch] = useReducer(authReducer,{\n        user:null,\n        authIsReady:false\n    })\n// now this function will fire everytime there is some\n// authentication state change\n// but firebase does not have any removeEventListener\n// like function but it returns a function that do the\n// same work\n\n    useEffect(()=>{\n        const unsub = projectAuth.onAuthStateChanged((user)=>{\n            dispatch({type:'AUTH_IS_READY',payload:user})\n        })\n\n        unsub();\n    },[])\n\n    return (\n        <AuthContext.Provider value = {{...state, dispatch}}>\n            {children};\n        </AuthContext.Provider>\n    )\n}\n\n\n/*\nwhy we are calling function inside function discussion\n----------\nonAuthStateChanged takes a function as it's only argument. That function is the one that will be invoked whenever the auth state changes. So the code\n\nfunction printHelloWorld() {\n    console.log(\"Hello World\")\n}\n\nfirebase.auth().onAuthStateChanged(printHelloWorld)\nWill print \"Hello World\" to the console, any time the auth state changes. But, at some later time, we want to stop that function from executing anymore, because we've already done whatever we need to. If you're familiar with event listeners, they use a pattern where to remove one, you would call something like removeEventListener. But firebase does not have a offAuthStateChanged or some such. Instead the onAuthStateChanged function returns a function to you that unsubscribes the function you originally gave it. To be clear, it does not return your original function (the one you gave it, so printHelloWorld in this example), but returns you a new function that can be used to remove the original.\n\nSo going back to the example:\n\nfunction printHelloWorld() {\n    console.log(\"Hello World\")\n}\n\nvar unsubscribe = firebase.auth().onAuthStateChanged(printHelloWorld)\n\n// ... Sometime later when we are no longer interested in auth changes\nunsubscribe();\n// From this point forward, when the auth state changes, printHelloWorld will no longer be triggered.\nFinally, suppose that you only want to have a function run on auth changes, but only one time. The simplest way to do that would be to have it run once, then unsubscribe it. So the code:\n\nvar unsubscribe = firebase.auth().onAuthStateChanged(() => {\n    console.log(\"Hello World\")\n    unsubscribe()\n})\nmeans that the first time auth state changes, we will log the string, then immediately unsubscribe from further changes. So by calling the unsubscribe from within the function itself, we are just saying, run one time, then remove yourself.\n\nAlso, note that you can call unsubscribe at the beginning or end of the function, it doesn't matter. The entire function body will execute, just like any other. So calling unsubscribe won't halt the execution of the remainder of the function, or anything like that.\n\nThis is why things like\n\nvar unsubscribe = firebase.auth().onAuthStateChanged(() => {\n    unsubscribe()\n    // Lots of other code here...\n});\nis such a common pattern.\n*/\n"],"mappings":";;AAAA,SAAQA,aAAa,EAAEC,UAAU,QAAO,OAAO;AAC/C,SAASC,WAAW,QAAQ,oBAAoB;AAAC;AAEjD,OAAO,MAAMC,WAAW,gBAAGH,aAAa,EAAE;AAE1C,OAAO,MAAMI,WAAW,GAAG,CAACC,KAAK,EAACC,MAAM,KAAG;EAEvC,QAAOA,MAAM,CAACC,IAAI;IAEd,KAAK,OAAO;MACR,OAAO;QAAC,GAAGF,KAAK;QAAEG,IAAI,EAACF,MAAM,CAACG;MAAO,CAAC;IAC1C,KAAK,QAAQ;MACT,OAAO;QAAC,GAAGJ,KAAK;QAACG,IAAI,EAAC;MAAI,CAAC;IAC/B,KAAK,eAAe;MAChB,OAAO;QAAC,GAAGH,KAAK;QAAEG,IAAI,EAACF,MAAM,CAACG;MAAO,CAAC;IAC1C;MACI,OAAOJ,KAAK;EAAC;AAEzB,CAAC;AAED,OAAO,MAAMK,mBAAmB,GAAG,QAAc;EAAA;EAAA,IAAb;IAACC;EAAQ,CAAC;EAE1C,MAAM,CAACN,KAAK,EAACO,QAAQ,CAAC,GAAGX,UAAU,CAACG,WAAW,EAAC;IAC5CI,IAAI,EAAC,IAAI;IACTK,WAAW,EAAC;EAChB,CAAC,CAAC;EACN;EACA;EACA;EACA;EACA;;EAEIC,SAAS,CAAC,MAAI;IACV,MAAMC,KAAK,GAAGb,WAAW,CAACc,kBAAkB,CAAER,IAAI,IAAG;MACjDI,QAAQ,CAAC;QAACL,IAAI,EAAC,eAAe;QAACE,OAAO,EAACD;MAAI,CAAC,CAAC;IACjD,CAAC,CAAC;IAEFO,KAAK,EAAE;EACX,CAAC,EAAC,EAAE,CAAC;EAEL,oBACI,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAI;MAAC,GAAGV,KAAK;MAAEO;IAAQ,CAAE;IAAA,WAC/CD,QAAQ;EAAA;IAAA;IAAA;IAAA;EAAA,QACU;AAE/B,CAAC;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxCA,GA5BaD,mBAAmB;AAAA,KAAnBA,mBAAmB;AAAA;AAAA"},"metadata":{},"sourceType":"module"}